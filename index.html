<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Twittler</title>
    <link rel="shortcut icon" href="favicon.ico">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="assets/main.css">
  </head>
  <body>


    <!--Header-->
    <header>
      <nav>
        <a href="index.html"><img src="favicon.ico">Home</a>
      </nav>
      <nav><button class ="back">Back to Your Page</button>
      </nav>
    </header>


    <!--Grid-->
    <section class="grid">


      <!--Personal Info: Left Column-->
      <section class="col-1-3">
        <p>Primary User!</p>
       <img src="assets/images/bronnSmall.png" class="photo">
      </section>


      <!--Tweets: Right Column-->
      <section class="col-2-3">
         <button class="showTweets">Show New Tweets</button>
        <div class="tweets">
          </div>
       
      </section>


    </section>


    <!--Footer-->
    <footer>
      <small>&copy;Twittler</small>

      <nav>
        <a href="index.html"><img src="favicon.ico">Home</a>
      </nav>
    </footer>


    <section id="#otherUser">

    </section>




    <script>

      $(document).ready(function(){
        
        var preserveBody = $('body').html();
        var $body = $('body');
        /*$body.html('');*/
        var startIndex = streams.home.length-1;
        var index = streams.home.length - 1;
        var user = streams.home[index].user;
        while(index >= 0){
          var tweet = streams.home[index];
          var userLink = $('<button class="otherUser"></button>');
          userLink.text(tweet.user);
          var $tweet = $('<div class="newTweet"></div>');
          $tweet.text(tweet.message + '. Time: ' + tweet.created_at);
          $tweet.append(userLink);
          $('.tweets').prepend($tweet);
          index -= 1;
        }
           

        $('.showTweets').on('click', function() {
          var myIndex = startIndex;
          startIndex = streams.home.length-1;
          var index = streams.home.length-1;
          var user = streams.home[index].user;
          while(index >= myIndex){
            var tweet = streams.home[index];
            var $tweet = $('<li class="newTweet"></li>');
            var userLink = $('<button class="otherUser"></button>');
            userLink.text(tweet.user);
            $tweet.text(tweet.message + '. Time: ' + tweet.created_at);
            $tweet.append(userLink);
            $tweet.prependTo($('.tweets')); 
            index -= 1;
        }
        })
             



       /*============================================
        Other User Info
       ============================================*/
        
       
       $(document).on('click', '.otherUser', function() {
        
        $('p').text($(this).text());
        var user = $(this).text();
        var userStr = '';
        userStr += user;
        $('.photo').attr('src', otherUser[userStr]);
        var otherCapture = $('.tweets').has(userStr);
        $('.col-2-3').html('<div class ="otherTweets"></div>');
        var otherMaxMsgs = streams.users[user].length;
        var i;
        for(i=0; i<otherMaxMsgs; i++) {
          var $tweet = $('<div class="newTweet"></div>')
          var msg = streams.users[user][i].message
          $tweet.text(msg)
          $('.otherTweets').append($tweet);
          
        }


       })


       $('.back').on('click', function() {
        $('body').html(preserveBody);
       })










       




      });

    </script>
  </body>
</html>
